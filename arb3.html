<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3-baigčių arbitražas</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>⚽ 3-baigčių arbitražas</h1>

    <!-- Greitas įklijavimas -->
    <div class="card" style="margin-bottom:16px">
      <label for="paste" class="lbl">Greitas įklijavimas</label>
      <textarea id="paste" rows="3" placeholder="pvz.: A @2.30, Lygiosios @3.20, B @3.10"></textarea>
      <button class="btn btn-blue" type="button" onclick="quickParse()">Ištraukti skaičius</button>
      <small>Automatiškai suras 3 koeficientus iš teksto.</small>
    </div>

    <!-- Forma -->
    <div class="card">
      <label class="lbl">Koeficientas 1</label>
      <input id="odd1" type="number" step="0.01">

      <label class="lbl">Koeficientas 2</label>
      <input id="odd2" type="number" step="0.01">

      <label class="lbl">Koeficientas 3</label>
      <input id="odd3" type="number" step="0.01">

      <label class="lbl">Bankrolas (€)</label>
      <input id="bank" type="number" value="100">

      <button class="btn btn-green" onclick="calc()">Skaičiuoti</button>
    </div>

    <div id="result" class="result"></div>
  </div>

  <script>
  function quickParse(){
    const t = document.getElementById('paste').value;
    const odds = [];
    (t.match(/(\d+[.,]?\d*)/g) || []).forEach(s=>{
      odds.push(parseFloat(s.replace(',','.')));
    });

    if(odds.length>=3){
      document.getElementById('odd1').value = odds[0];
      document.getElementById('odd2').value = odds[1];
      document.getElementById('odd3').value = odds[2];
      alert(`Rasta: ${odds[0]}, ${odds[1]}, ${odds[2]}`);
    } else {
      alert("❌ Nerasta pakankamai skaičių (reikia bent 3).");
    }
  }

  function calc(){
    const o1 = parseFloat(document.getElementById('odd1').value);
    const o2 = parseFloat(document.getElementById('odd2').value);
    const o3 = parseFloat(document.getElementById('odd3').value);
    const bank = parseFloat(document.getElementById('bank').value);

    if(!o1 || !o2 || !o3 || !bank){
      document.getElementById('result').innerText = "❌ Užpildyk visus laukus.";
      return;
    }

    // statymų paskirstymas proporcingai
    const inv1 = 1/o1, inv2 = 1/o2, inv3 = 1/o3;
    const sum = inv1+inv2+inv3;
    const stake1 = bank*(inv1/sum);
    const stake2 = bank*(inv2/sum);
    const stake3 = bank*(inv3/sum);

    const profit1 = stake1*o1 - bank;
    const profit2 = stake2*o2 - bank;
    const profit3 = stake3*o3 - bank;

    document.getElementById('result').innerHTML = `
      <p>💸 Statymas 1: €${stake1.toFixed(2)}</p>
      <p>💸 Statymas 2: €${stake2.toFixed(2)}</p>
      <p>💸 Statymas 3: €${stake3.toFixed(2)}</p>
      <p>📈 Pelnas jei laimi 1: €${profit1.toFixed(2)}</p>
      <p>📈 Pelnas jei laimi 2: €${profit2.toFixed(2)}</p>
      <p>📈 Pelnas jei laimi 3: €${profit3.toFixed(2)}</p>
    `;
  }
  </script>
</body>
</html>
