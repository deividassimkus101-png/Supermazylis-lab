<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EV / ROI skaiÄiuotuvas</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>ğŸ“Š EV / ROI skaiÄiuotuvas</h1>

    <!-- Greitas Ä¯klijavimas -->
    <div class="card" style="margin-bottom:16px">
      <label for="paste" class="lbl">Greitas Ä¯klijavimas</label>
      <textarea id="paste" rows="3" placeholder="pvz.: Komanda A @1.92, Komanda B @2.05; tikimybÄ—s 54% ir 46%"></textarea>
      <button class="btn btn-blue" type="button" onclick="quickParse()">IÅ¡traukti skaiÄius</button>
      <small>AutomatiÅ¡kai suras koeficientus ir tikimybes iÅ¡ Ä¯klijuoto teksto.</small>
    </div>

    <!-- Ä®prasta forma -->
    <div class="card">
      <label class="lbl">Koeficientai</label>
      <input id="odds" type="text" placeholder="pvz.: 1.85, 2.10, 3.20">

      <label class="lbl">TikimybÄ—s (%)</label>
      <input id="probs" type="text" placeholder="pvz.: 55, 45">

      <label class="lbl">Bankrolas (â‚¬)</label>
      <input id="bank" type="number" value="100">

      <button class="btn btn-green" onclick="calc()">SkaiÄiuoti</button>
    </div>

    <div id="result" class="result"></div>
  </div>

  <script>
  function quickParse(){
    const t = document.getElementById('paste').value;
    const percents = [];
    const odds = [];

    // randa % reikÅ¡mes
    (t.match(/(\d+[.,]?\d*)\s*%/g) || []).forEach(s=>{
      percents.push(parseFloat(s.replace('%','').replace(',','.')));
    });

    // randa skaiÄius be %
    (t.match(/(\d+[.,]?\d*)/g) || []).forEach(s=>{
      if(!s.includes('%')) odds.push(parseFloat(s.replace(',','.')));
    });

    // Ä¯raÅ¡o Ä¯ laukus
    if(odds.length) document.getElementById('odds').value = odds.join(', ');
    if(percents.length) document.getElementById('probs').value = percents.join(', ');

    alert(`Rasta: koef.= [${odds.join(', ')}] | tikimybÄ—s= [${percents.join(', ')}]%`);
  }

  function calc(){
    const odds = document.getElementById('odds').value.split(',').map(x=>parseFloat(x.trim()));
    const probs = document.getElementById('probs').value.split(',').map(x=>parseFloat(x.trim())/100);
    const bank = parseFloat(document.getElementById('bank').value);

    if(odds.length !== probs.length){
      document.getElementById('result').innerText = "âŒ Kiekiai nesutampa!";
      return;
    }

    let ev = 0;
    for(let i=0;i<odds.length;i++){
      ev += probs[i]*odds[i];
    }
    ev -= 1;

    document.getElementById('result').innerHTML = `
      <p>ğŸ“ˆ TikÄ—tina grÄ…Å¾a (EV): ${(ev*100).toFixed(2)}%</p>
      <p>ğŸ’° Bankrolas: â‚¬${bank.toFixed(2)}</p>
    `;
  }
  </script>
</body>
</html>
