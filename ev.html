<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EV / ROI skaičiuotuvas</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>📊 EV / ROI skaičiuotuvas</h1>

    <!-- Greitas įklijavimas -->
    <div class="card" style="margin-bottom:16px">
      <label for="paste" class="lbl">Greitas įklijavimas</label>
      <textarea id="paste" rows="3" placeholder="pvz.: Komanda A @1.92, Komanda B @2.05; tikimybės 54% ir 46%"></textarea>
      <button class="btn btn-blue" type="button" onclick="quickParse()">Ištraukti skaičius</button>
      <small>Automatiškai suras koeficientus ir tikimybes iš įklijuoto teksto.</small>
    </div>

    <!-- Įprasta forma -->
    <div class="card">
      <label class="lbl">Koeficientai</label>
      <input id="odds" type="text" placeholder="pvz.: 1.85, 2.10, 3.20">

      <label class="lbl">Tikimybės (%)</label>
      <input id="probs" type="text" placeholder="pvz.: 55, 45">

      <label class="lbl">Bankrolas (€)</label>
      <input id="bank" type="number" value="100">

      <button class="btn btn-green" onclick="calc()">Skaičiuoti</button>
    </div>

    <div id="result" class="result"></div>
  </div>

  <script>
  function quickParse(){
    const t = document.getElementById('paste').value;
    const percents = [];
    const odds = [];

    // randa % reikšmes
    (t.match(/(\d+[.,]?\d*)\s*%/g) || []).forEach(s=>{
      percents.push(parseFloat(s.replace('%','').replace(',','.')));
    });

    // randa skaičius be %
    (t.match(/(\d+[.,]?\d*)/g) || []).forEach(s=>{
      if(!s.includes('%')) odds.push(parseFloat(s.replace(',','.')));
    });

    // įrašo į laukus
    if(odds.length) document.getElementById('odds').value = odds.join(', ');
    if(percents.length) document.getElementById('probs').value = percents.join(', ');

    alert(`Rasta: koef.= [${odds.join(', ')}] | tikimybės= [${percents.join(', ')}]%`);
  }

  function calc(){
    const odds = document.getElementById('odds').value.split(',').map(x=>parseFloat(x.trim()));
    const probs = document.getElementById('probs').value.split(',').map(x=>parseFloat(x.trim())/100);
    const bank = parseFloat(document.getElementById('bank').value);

    if(odds.length !== probs.length){
      document.getElementById('result').innerText = "❌ Kiekiai nesutampa!";
      return;
    }

    let ev = 0;
    for(let i=0;i<odds.length;i++){
      ev += probs[i]*odds[i];
    }
    ev -= 1;

    document.getElementById('result').innerHTML = `
      <p>📈 Tikėtina grąža (EV): ${(ev*100).toFixed(2)}%</p>
      <p>💰 Bankrolas: €${bank.toFixed(2)}</p>
    `;
  }
  </script>
</body>
</html>
